(()=>{var pe=Object.defineProperty;var X=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ee=(g,l,h)=>l in g?pe(g,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):g[l]=h,E=(g,l)=>{for(var h in l||(l={}))he.call(l,h)&&ee(g,h,l[h]);if(X)for(var h of X(l))$e.call(l,h)&&ee(g,h,l[h]);return g};$(document).ready(function(){let g="",l=-1,h=!1,P=!1,d=[],I=_.defaults(sessdata.app_config,{summary:!0}).summary,j=new Set,M=!1,U=0,O=function(){let e=[];return{add:function(t,n){e.push({id:t,callback:n})},remove:function(t){e=e.filter(function(n){return t!==n.id})},invoke:function(){for(let t=0;t<e.length;t++)e[t].callback()}}}();function R(e,t){if(typeof t=="undefined"&&(t=!0),d.length===0||(e=e*1,e===l))return;if(l!==-1){let i=$(d[l].jqElement);i.trigger("hide"),i.removeClass("current"),i.trigger("hidden"),$(d[l].jqListElement).removeClass("current")}let n=$(d[e].jqElement);n.trigger("show"),n.addClass("current"),n.trigger("shown"),$(d[e].jqListElement).addClass("current"),l=e,t&&O.invoke(),setTimeout(function(){$(document).scrollTop(0)},0)}function B(e){let t=window.location.href.replace(window.location.hash,"");window.location=`${t}#${d[e].id}`,$("#learnr-tutorial-content").parent().scrollTop(0),C(e-1)}function te(e){z(),B(this.getAttribute("index"))}function ne(){$(".topicsList").removeClass("hideFloating")}function z(){$(".topicsList").addClass("hideFloating")}function D(e){K();let t=d[e];if(!t.progressiveReveal)return;let n=!0,i=null;for(let o=0;o<t.sections.length;o++){let r=t.sections[o],s=$(r.jqElement);n?(s.trigger("show"),s.removeClass("hide"),s.trigger("shown"),r.skipped?s.removeClass("showSkip"):(s.addClass("showSkip"),i=s)):(s.trigger("hide"),s.addClass("hide"),s.trigger("hidden")),n=n&&r.skipped}!t.progressiveReveal||n?$(t.jqElement).removeClass("hideActions"):$(t.jqElement).addClass("hideActions"),M&&i&&(U=i.offset().top-28,setTimeout(function(){$("html, body").animate({scrollTop:U},300)},60)),M=!1}function V(e){let t=d[e],n=t.sections.length===0?!t.topicCompleted*100:(1-t.sectionsSkipped/t.sections.length)*100;$(t.jqListElement).css("background-position-y",n+"%")}function H(e){return i18next.language||window.localStorage.i18nextLng||e||"en"}function ie(e){$(this).data("n_clicks",$(this).data("n_clicks")+1);let t=this.getAttribute("data-section-id"),n=-1,i=-1,o,r;if($.each(d,function(s,a){return $.each(a.sections,function(c,u){if(t===u.id)return n=s,i=c,o=a,r=u,!1}),n===-1}),r.exercises.length&&!r.completed&&!r.allowSkip){let s=i18next.t(["text.exercise","exercise"],{count:r.exercises.length,lngs:[H(),"en"]}),a=i18next.t(["text.youmustcomplete","You must complete the"]),c=i18next.t(["text.inthissection","in this section before continuing."]);bootbox.setLocale(H()),bootbox.alert(a+" "+s+" "+c)}else i===o.sections.length-1?n<d.length-1&&B(l+1):M=!0,Q([r.jqElement]),tutorial.skipSection(t)}function oe(e){d[l].sections.length===0&&tutorial.skipSection(d[l].id),C(l),B(l+1)}function se(e){B(l-1)}function ce(){let e=$('<nav id="tutorial-topic" class="topicsList hideFloating" aria-label="topic"></nav>'),t=$('<header class="topicsHeader"></header>'),n=$('<div class="paneCloser"></div>');n.on("click",z),t.append(n),e.append(t);let i=F()?$('<ul class="nav nav-pills" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>'):$('<ul class="nav flex-column" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>');e.append(i),$("#doc-metadata").before(e),K();let o=$(".section.level2");o.each(function(s,a){let c={};c.id=$(a).attr("id"),c.exercisesCompleted=0,c.sectionsCompleted=0,c.sectionsSkipped=0,c.topicCompleted=!1,c.jqElement=a,c.jqTitleElement=$(a).children("h2")[0],c.titleText=c.jqTitleElement.innerText;let u=$(a).attr("data-progressive");typeof u!="undefined"&&u!==!1?c.progressiveReveal=u==="true"||u==="TRUE":c.progressiveReveal=h;let b=$(`<li class="topic${F()?"":" nav-item"}" index="${s}"><a href="#${c.id}" class = "nav-link" role="menuitem" tabindex="0">${c.titleText}</a></li>`);b.on("click",te),c.jqListElement=b,$(i).append(b);let y=$('<div class="topicActions"></div>');if(s>0){let m=$('<button class="btn btn-default" data-i18n="button.previoustopic">Previous Topic</button>');m.on("click",se),y.append(m)}if(s<o.length-1){let m=$('<button class="btn btn-primary" data-i18n="button.nexttopic">Next Topic</button>');m.on("click",oe),y.append(m)}$(a).append(y),$(a).on("shown",function(){$(this).is(":visible")&&$(a).children(".section.level3").each(function(f,p){q(p)})}),$(a).on("hidden",function(){$(a).children(".section.level3").each(function(f,p){q(p)})}),c.sections=[],$(a).children(".section.level3").each(function(m,f){if(c.progressiveReveal){let S='data-i18n="button.continue"',L="Continue";f.dataset.continueText&&(L=f.dataset.continueText,S="");let v=$(`<button
              class="btn btn-default skip"
              id="continuebutton-${f.id}"
              data-section-id="${f.id}"
              ${S}
            >${L}</button>`);v.data("n_clicks",0),v.on("click",ie);let G=$('<div class="exerciseActions"></div>');G.append(v),$(f).append(G)}$(f).on("shown",function(){q(f)}),$(f).on("hidden",function(){q(f)});let p={};p.exercises=[],$(f).children(".tutorial-exercise").each(function(S,L){let v={};v.dataLabel=$(L).attr("data-label"),v.completed=!1,v.jqElement=L,p.exercises.push(v)});let k=$(f).attr("data-allow-skip"),w=P;typeof k!="undefined"&&k!==!1&&(w=k="true"),p.id=f.id,p.completed=!1,p.allowSkip=w,p.skipped=!1,p.jqElement=f,c.sections.push(p)}),d.push(c)});let r=$('<li class="resetButton"><a href="#" data-i18n="text.startover">Start Over</a></li>');return r.on("click",function(){let s=i18next.t(["text.areyousure","Are you sure you want to start over? (all exercise progress will be reset)"]);bootbox.setLocale(H()),bootbox.confirm(s,function(a){a&&tutorial.startOver()})}),$("#doc-metadata-additional ul").prepend(r),e}let J=new Shiny.InputBinding;$.extend(J,{find:function(e){return $(e).find(".topicsList")},getValue:function(e){return l===-1?null:d[l].id},setValue:function(e,t){for(let n=0;n<d.length;n++)if(d[n].id===t){R(n,!1);break}},subscribe:function(e,t){O.add(e.id,t)},unsubscribe:function(e){O.remove(e.id)}}),Shiny.inputBindings.register(J,"learnr.topicMenuInputBinding");let W=new Shiny.InputBinding;$.extend(W,{find:function(e){return $(e).find(".exerciseActions > button.skip")},getId:function(e){return"continuebutton-"+e.getAttribute("data-section-id")},getValue:function(e){return $(e).data("n_clicks")},setValue:function(e,t){let n=$(e).data("n_clicks");t>n&&$(e).trigger("click"),$(e).data("n_clicks",t)},subscribe:function(e,t){$(e).on("click.continueButtonInputBinding",function(n){t(!1)})},unsubscribe:function(e){$(e).off(".continueButtonInputBinding")}}),Shiny.inputBindings.register(W,"learnr.continueButtonInputBinding");function ae(){g=$("title")[0].innerText;let e=$("meta[name=progressive]").attr("content");h=e==="true"||e==="TRUE";let t=$("meta[name=allow-skip]").attr("content");P=t==="true"||t==="TRUE";let n=$(`<h1 class="tutorialTitle">${g}</h1>`);n.on("click",ne),$(".topics").prepend(n),$(".bandContent.topicsListContainer").append(ce());for(let o=0;o<d.length;o++)D(o);le();function i(){$(".topicsList").css("max-height",window.innerHeight)}i(),window.addEventListener("resize",i)}function le(){$(".footnote-ref").replaceWith(function(){let e=$("<span>");return e.addClass($(this).class),e.append($(this).html()),e}),$(".footnote-back").remove()}function F(){return!window.bootstrap}function re(){if(F())return;document.querySelectorAll(".btn-xs").forEach(n=>{n.classList.remove("btn-xs"),n.classList.add("btn-sm")}),document.querySelectorAll(".sr-only").forEach(n=>{n.classList.contains("visually-hidden-focusable")||n.classList.add("visually-hidden")});let e={panel:"card","panel-default":"","panel-heading":"card-header","panel-title":"card-title","panel-body":"card-body","panel-footer":"card-footer"},t=document.querySelectorAll(".tutorial-exercise-input, .tutorial-question-container");t.length!==0&&t.forEach(n=>{Object.keys(e).forEach(i=>{let o=[n,...n.querySelectorAll(`.${i}`)];if(!o.length)return;let r=e[i];o.forEach(s=>{!s.classList.contains(i)||(s.classList.remove(i),r!==""&&s.classList.add(r))})})})}function ue(){function e(){let t=window.decodeURIComponent(window.location.hash),n=0;return t.length>0&&$.each(d,function(i,o){if("#"+o.id===t)return n=i,!1}),n}R(e()),C(l-1),window.addEventListener("popstate",function(t){R(e())})}function de(e){let t=$(e),n=t.hasClass("level2"),i;n?i=t.attr("id"):i=$(t.parents(".section.level2")).attr("id");let o=-1;if($.each(d,function(s,a){if(a.id===i)return o=s,!1}),o===-1){console.log('topic "'+i+'" not found');return}let r=d[o];if(n)r.topicCompleted=!0,V(o);else{let s=-1,a=t.attr("id");if($.each(r.sections,function(u,b){if(b.id===a)return s=u,!1}),s===-1){console.log('completed section"'+a+'"not found');return}let c=r.sections[s];c.completed||(r.sectionsCompleted++,V(o),$(c.jqElement).addClass("done"),c.completed=!0,D(o))}}let x=[];function K(){x.splice(0,x.length),N()}function q(e){let t=x.indexOf(e.id);$(e).is(":visible")?t===-1&&(x.push(e.id),N()):t!==-1&&(x.splice(t,1),N())}function N(){Shiny&&Shiny.setInputValue?Shiny.setInputValue("tutorial-visible-sections",x):$(document).on("shiny:sessioninitialized",function(){Shiny.setInputValue("tutorial-visible-sections",x)})}function Q(e){let t;if(e.length)t=e[0].id;else{console.log("section "+$(e).selector.split('"')[1]+" not found");return}let n=-1;$.each(d,function(i,o){return t===o.id?(n=i,o.topicCompleted=!0,!1):($.each(o.sections,function(r,s){if(t===s.id)return n=i,s.skipped=!0,o.sectionsSkipped++,!1}),n===-1)}),V(n),D(n)}function fe(e){let t=0,n=0,i=e.length;for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)<<0;return t+2147483647+1}function Y(e,t){if(!I)return;let n=$(".parallellayout.col.main"),i=$(".parallellayout.col.side");if(!i.is(":visible")){let a={dontShowAgain:!0};if(config.language==="de"){let c={nextLabel:"Weiter",prevLabel:"Zur\xFCck",doneLabel:"Fertig",stepNumbersOfLabel:"von",dontShowAgainLabel:"Nicht wieder anzeigen"};a=E(E({},a),c)}n.css("flexBasis","100%"),i.css("flexBasis","0%"),i.show(),i.animate({flexBasis:"30%"},{duration:1e3,step:function(c,u){n.css("flexBasis",100-c+"%")},complete:function(){postEvent(sess,tracking_session_id,sessdata.user_code,"summary_shown"),MathJax.Hub.Queue(["Rerender",MathJax.Hub]),$(".shiny-plot-output").each(()=>Shiny.renderContent(this.id)),introJs().setOptions(a).start()}})}let o=`${e}.${t}`,r=$("#summarytext"),s=null;if(!j.has(o)){let a=$(`.section.level2:eq(${e})  .summary:eq(${t})`);s=a.prop("id");let c=a.children().detach(),u=null,b=!1;for(let T=0;T<c.length;T++){let m=c[T],f=$(m).hasClass("replace")||a.hasClass("replace"),p=m.tagName==="DIV"?$(m).children():[m];for(let A=0;A<p.length;A++){let k=p[A],w=$(k);if(k.tagName==="H4"){u!==null&&(u.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),r.append(u));let S="summaryContainer_"+fe(w.text());u=r.find("."+S),u.length===0&&(u=$(`<div class="${S}"></div>`),u.append(w),b=!0)}else u!==null?(f&&u.find(":not(h4)").remove(),u.append(w)):console.error("invalid summary definition (no summary section provided before)");u!==null&&T>=c.length-1&&(u.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),b&&(r.append(u),b=!1))}}postEvent(sess,tracking_session_id,sessdata.user_code,"summary_topic_added",{key:o,id:s});let y=r.parent();y.animate({scrollTop:y.prop("scrollHeight")},1e3),j.add(o)}}function C(e){if(!!I)for(let t=0;t<=e;t++){let n=$(`.section.level2:eq(${t})`).find(".summary");for(let i=0;i<n.length;i++)j.has(`${t}.${i}`)||Y(t,i)}}function Z(e){let t=Math.floor(e-$(".topicsContainer").height());$(".parallellayout.row").height(t)}I&&($(".parallellayout.col.main").scroll(function(){let e=$(`.section.level2:eq(${l})`).find(".summary"),t=$(".bandContent.topicsListContainer").height();e.each(function(i,o){o.getBoundingClientRect().bottom<t&&Y(l,i)});let n=this.scrollHeight-this.clientHeight;this.scrollTop>=n-10&&C(l)}),$(window).on("hashchange",function(){C(l-1)})),$(window).on("resize",function(){Z($(this).height())}),re(),ae(),ue(),Z($(window).height()),tutorial.onInit(function(){tutorial.onProgress(function(e){e.event==="section_completed"?de(e.element):e.event==="section_skipped"&&Q(e.element)})})});})();
//# sourceMappingURL=tutorial-format.js.map
