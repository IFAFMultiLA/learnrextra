(()=>{var ge=Object.defineProperty;var ee=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var te=(b,l,h)=>l in b?ge(b,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):b[l]=h,F=(b,l)=>{for(var h in l||(l={}))ve.call(l,h)&&te(b,h,l[h]);if(ee)for(var h of ee(l))be.call(l,h)&&te(b,h,l[h]);return b};$(document).ready(function(){let b="",l=-1,h=!1,N=!1,r=[],q=_.defaults(sessdata.app_config,{summary:!0,reset_button:!0,chatbot:!0}),A=_.defaults(q.summary,!0).valueOf(),ne=_.defaults(q.reset_button,!0).valueOf(),ie=_.defaults(q.reset_button,!0).valueOf(),M=new Set,j=!1,P=0,oe=["h2","h3","h4","h5","h6","p","ul","ol","div.figure","div.section"].map(e=>".section.level2 > "+e).join(", ");$(oe).each(function(e,t){$(t).prop("id",`mainContentElem-${e}`).addClass("mainContentElem")});let U="ready";ie&&($("#chatview").show(),$("#chatview > .header").on("click",function(){$("#chatview").hasClass("opened")?$("#chatview").removeClass("opened").addClass("closed"):$("#chatview").removeClass("closed").addClass("opened")}),$("#chatview > .controls > button").on("click",function(){let e=$("#chatview > .controls > textarea"),t=e.val().trim();if(t!==""&&U==="ready"){$("#chatview > .messages").append(`<div class="msg user">${nl2br(t)}</div>`);let n=$("#chatview > .messages > .msg.user:last")[0];MathJax.Hub.Queue(["Typeset",MathJax.Hub,n]),e.val(""),U="awaiting_response",$("#chatview > .controls > button").attr("disabled",!0)}}));let I=function(){let e=[];return{add:function(t,n){e.push({id:t,callback:n})},remove:function(t){e=e.filter(function(n){return t!==n.id})},invoke:function(){for(let t=0;t<e.length;t++)e[t].callback()}}}();function O(e,t){if(typeof t=="undefined"&&(t=!0),r.length===0||(e=e*1,e===l))return;if(l!==-1){let i=$(r[l].jqElement);i.trigger("hide"),i.removeClass("current"),i.trigger("hidden"),$(r[l].jqListElement).removeClass("current")}let n=$(r[e].jqElement);n.trigger("show"),n.addClass("current"),n.trigger("shown"),$(r[e].jqListElement).addClass("current"),l=e,t&&I.invoke(),setTimeout(function(){$(document).scrollTop(0)},0)}function S(e,t){let n=window.location.href.replace(window.location.hash,"");if(window.location=`${n}#${r[e].id}`,t===void 0)$("#learnr-tutorial-content").parent().scrollTop(0);else{let i=$(`#${t}`)[0],c=Math.max(i.offsetTop-i.offsetHeight-60,0);$("#learnr-tutorial-content").parent().scrollTop(c)}T(e-1)}function se(e){z(),S(this.getAttribute("index"))}function ce(){$(".topicsList").removeClass("hideFloating")}function z(){$(".topicsList").addClass("hideFloating")}function R(e){W();let t=r[e];if(!t.progressiveReveal)return;let n=!0,i=null;for(let c=0;c<t.sections.length;c++){let a=t.sections[c],o=$(a.jqElement);n?(o.trigger("show"),o.removeClass("hide"),o.trigger("shown"),a.skipped?o.removeClass("showSkip"):(o.addClass("showSkip"),i=o)):(o.trigger("hide"),o.addClass("hide"),o.trigger("hidden")),n=n&&a.skipped}!t.progressiveReveal||n?$(t.jqElement).removeClass("hideActions"):$(t.jqElement).addClass("hideActions"),j&&i&&(P=i.offset().top-28,setTimeout(function(){$("html, body").animate({scrollTop:P},300)},60)),j=!1}function H(e){let t=r[e],n=t.sections.length===0?!t.topicCompleted*100:(1-t.sectionsSkipped/t.sections.length)*100;$(t.jqListElement).css("background-position-y",n+"%")}function E(e){return i18next.language||window.localStorage.i18nextLng||e||"en"}function ae(e){$(this).data("n_clicks",$(this).data("n_clicks")+1);let t=this.getAttribute("data-section-id"),n=-1,i=-1,c,a;if($.each(r,function(o,s){return $.each(s.sections,function(d,m){if(t===m.id)return n=o,i=d,c=s,a=m,!1}),n===-1}),a.exercises.length&&!a.completed&&!a.allowSkip){let o=i18next.t(["text.exercise","exercise"],{count:a.exercises.length,lngs:[E(),"en"]}),s=i18next.t(["text.youmustcomplete","You must complete the"]),d=i18next.t(["text.inthissection","in this section before continuing."]);bootbox.setLocale(E()),bootbox.alert(s+" "+o+" "+d)}else i===c.sections.length-1?n<r.length-1&&S(l+1):j=!0,K([a.jqElement]),tutorial.skipSection(t)}function le(e){r[l].sections.length===0&&tutorial.skipSection(r[l].id),T(l),S(l+1)}function re(e){S(l-1)}function ue(){let e=$('<nav id="tutorial-topic" class="topicsList hideFloating" aria-label="topic"></nav>'),t=$('<header class="topicsHeader"></header>'),n=$('<div class="paneCloser"></div>');n.on("click",z),t.append(n),e.append(t);let i=V()?$('<ul class="nav nav-pills" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>'):$('<ul class="nav flex-column" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>');e.append(i),$("#doc-metadata").before(e),W();let c=$(".section.level2");if(c.each(function(a,o){let s={};s.id=$(o).attr("id"),s.exercisesCompleted=0,s.sectionsCompleted=0,s.sectionsSkipped=0,s.topicCompleted=!1,s.jqElement=o,s.jqTitleElement=$(o).children("h2")[0],s.titleText=s.jqTitleElement.innerText;let d=$(o).attr("data-progressive");typeof d!="undefined"&&d!==!1?s.progressiveReveal=d==="true"||d==="TRUE":s.progressiveReveal=h;let m=$(`<li class="topic${V()?"":" nav-item"}" index="${a}"><a href="#${s.id}" class = "nav-link" role="menuitem" tabindex="0">${s.titleText}</a></li>`);m.on("click",se),s.jqListElement=m,$(i).append(m);let f=$('<div class="topicActions"></div>');if(a>0){let g=$('<button class="btn btn-default" data-i18n="button.previoustopic">Previous Topic</button>');g.on("click",re),f.append(g)}if(a<c.length-1){let g=$('<button class="btn btn-primary" data-i18n="button.nexttopic">Next Topic</button>');g.on("click",le),f.append(g)}$(o).append(f),$(o).on("shown",function(){$(this).is(":visible")&&$(o).children(".section.level3").each(function(u,p){L(p)})}),$(o).on("hidden",function(){$(o).children(".section.level3").each(function(u,p){L(p)})}),s.sections=[],$(o).children(".section.level3").each(function(g,u){if(s.progressiveReveal){let k='data-i18n="button.continue"',w="Continue";u.dataset.continueText&&(w=u.dataset.continueText,k="");let v=$(`<button
              class="btn btn-default skip"
              id="continuebutton-${u.id}"
              data-section-id="${u.id}"
              ${k}
            >${w}</button>`);v.data("n_clicks",0),v.on("click",ae);let X=$('<div class="exerciseActions"></div>');X.append(v),$(u).append(X)}$(u).on("shown",function(){L(u)}),$(u).on("hidden",function(){L(u)});let p={};p.exercises=[],$(u).children(".tutorial-exercise").each(function(k,w){let v={};v.dataLabel=$(w).attr("data-label"),v.completed=!1,v.jqElement=w,p.exercises.push(v)});let C=$(u).attr("data-allow-skip"),y=N;typeof C!="undefined"&&C!==!1&&(y=C="true"),p.id=u.id,p.completed=!1,p.allowSkip=y,p.skipped=!1,p.jqElement=u,s.sections.push(p)}),r.push(s)}),ne){let a=$('<li class="resetButton"><a href="#" data-i18n="text.startover">Start Over</a></li>');a.on("click",function(){let o=i18next.t(["text.areyousure","Are you sure you want to start over? (all exercise progress will be reset)"]);bootbox.setLocale(E()),bootbox.confirm(o,function(s){s&&tutorial.startOver()})}),$("#doc-metadata-additional ul").prepend(a)}return e}let J=new Shiny.InputBinding;$.extend(J,{find:function(e){return $(e).find(".topicsList")},getValue:function(e){return l===-1?null:r[l].id},setValue:function(e,t){for(let n=0;n<r.length;n++)if(r[n].id===t){O(n,!1);break}},subscribe:function(e,t){I.add(e.id,t)},unsubscribe:function(e){I.remove(e.id)}}),Shiny.inputBindings.register(J,"learnr.topicMenuInputBinding");let Q=new Shiny.InputBinding;$.extend(Q,{find:function(e){return $(e).find(".exerciseActions > button.skip")},getId:function(e){return"continuebutton-"+e.getAttribute("data-section-id")},getValue:function(e){return $(e).data("n_clicks")},setValue:function(e,t){let n=$(e).data("n_clicks");t>n&&$(e).trigger("click"),$(e).data("n_clicks",t)},subscribe:function(e,t){$(e).on("click.continueButtonInputBinding",function(n){t(!1)})},unsubscribe:function(e){$(e).off(".continueButtonInputBinding")}}),Shiny.inputBindings.register(Q,"learnr.continueButtonInputBinding");function de(){b=$("title")[0].innerText;let e=$("meta[name=progressive]").attr("content");h=e==="true"||e==="TRUE";let t=$("meta[name=allow-skip]").attr("content");N=t==="true"||t==="TRUE";let n=$(`<h1 class="tutorialTitle">${b}</h1>`);n.on("click",ce),$(".topics").prepend(n),$(".bandContent.topicsListContainer").append(ue());for(let c=0;c<r.length;c++)R(c);fe();function i(){$(".topicsList").css("max-height",window.innerHeight)}i(),window.addEventListener("resize",i)}function fe(){$(".footnote-ref").replaceWith(function(){let e=$("<span>");return e.addClass($(this).class),e.append($(this).html()),e}),$(".footnote-back").remove()}function V(){return!window.bootstrap}function pe(){if(V())return;document.querySelectorAll(".btn-xs").forEach(n=>{n.classList.remove("btn-xs"),n.classList.add("btn-sm")}),document.querySelectorAll(".sr-only").forEach(n=>{n.classList.contains("visually-hidden-focusable")||n.classList.add("visually-hidden")});let e={panel:"card","panel-default":"","panel-heading":"card-header","panel-title":"card-title","panel-body":"card-body","panel-footer":"card-footer"},t=document.querySelectorAll(".tutorial-exercise-input, .tutorial-question-container");t.length!==0&&t.forEach(n=>{Object.keys(e).forEach(i=>{let c=[n,...n.querySelectorAll(`.${i}`)];if(!c.length)return;let a=e[i];c.forEach(o=>{!o.classList.contains(i)||(o.classList.remove(i),a!==""&&o.classList.add(a))})})})}function he(){function e(){let t=window.decodeURIComponent(window.location.hash),n=0;return t.length>0&&$.each(r,function(i,c){if("#"+c.id===t)return n=i,!1}),n}O(e()),T(l-1),window.addEventListener("popstate",function(t){O(e())})}function me(e){let t=$(e),n=t.hasClass("level2"),i;n?i=t.attr("id"):i=$(t.parents(".section.level2")).attr("id");let c=-1;if($.each(r,function(o,s){if(s.id===i)return c=o,!1}),c===-1){console.log('topic "'+i+'" not found');return}let a=r[c];if(n)a.topicCompleted=!0,H(c);else{let o=-1,s=t.attr("id");if($.each(a.sections,function(m,f){if(f.id===s)return o=m,!1}),o===-1){console.log('completed section"'+s+'"not found');return}let d=a.sections[o];d.completed||(a.sectionsCompleted++,H(c),$(d.jqElement).addClass("done"),d.completed=!0,R(c))}}let x=[];function W(){x.splice(0,x.length),D()}function L(e){let t=x.indexOf(e.id);$(e).is(":visible")?t===-1&&(x.push(e.id),D()):t!==-1&&(x.splice(t,1),D())}function D(){Shiny&&Shiny.setInputValue?Shiny.setInputValue("tutorial-visible-sections",x):$(document).on("shiny:sessioninitialized",function(){Shiny.setInputValue("tutorial-visible-sections",x)})}function K(e){let t;if(e.length)t=e[0].id;else{console.log("section "+$(e).selector.split('"')[1]+" not found");return}let n=-1;$.each(r,function(i,c){return t===c.id?(n=i,c.topicCompleted=!0,!1):($.each(c.sections,function(a,o){if(t===o.id)return n=i,o.skipped=!0,c.sectionsSkipped++,!1}),n===-1)}),H(n),R(n)}function $e(e){let t=0,n=0,i=e.length;for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)<<0;return t+2147483647+1}function Y(e,t){if(!A)return;let n=$(".parallellayout.col.main"),i=$(".parallellayout.col.side");if(!i.is(":visible")){let s={dontShowAgain:!0};if(config.language==="de"){let d={nextLabel:"Weiter",prevLabel:"Zur\xFCck",doneLabel:"Fertig",stepNumbersOfLabel:"von",dontShowAgainLabel:"Nicht wieder anzeigen"};s=F(F({},s),d)}n.css("flexBasis","100%"),i.css("flexBasis","0%"),i.show(),i.animate({flexBasis:"30%"},{duration:1e3,step:function(d,m){n.css("flexBasis",100-d+"%")},complete:function(){tracking_config.summary&&postEvent(sess,tracking_session_id,sessdata.user_code,"summary_shown"),MathJax.Hub.Queue(["Rerender",MathJax.Hub]),$(".shiny-plot-output").each(()=>Shiny.renderContent(this.id)),introJs().setOptions(s).start()}})}let c=`${e}.${t}`,a=$("#summarytext"),o=null;if(!M.has(c)){let s=$(`.section.level2:eq(${e})  .summary:eq(${t})`),d=s.prevAll(".mainContentElem").first()||s.nextAll(".mainContentElem").first();o=s.prop("id");let m=s.children().detach(),f=null,B=!1;for(let u=0;u<m.length;u++){let p=m[u],G=$(p).hasClass("replace")||s.hasClass("replace"),C=p.tagName==="DIV"?$(p).children():[p];for(let y=0;y<C.length;y++){let k=C[y],w=$(k);if(k.tagName==="H4"){f!==null&&(f.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),a.append(f));let v="summaryContainer_"+$e(w.text());w.on("click",function(){S(e,d.length?d.prop("id"):void 0)}),f=a.find("."+v),f.length===0&&(f=$(`<div class="${v}"></div>`),f.append(w),B=!0)}else f!==null?(G&&f.find(":not(h4)").remove(),f.append(w)):console.error("invalid summary definition (no summary section provided before)");f!==null&&u>=m.length-1&&(f.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),B&&(a.append(f),B=!1))}}tracking_config.summary&&postEvent(sess,tracking_session_id,sessdata.user_code,"summary_topic_added",{key:c,id:o});let g=a.parent();g.animate({scrollTop:g.prop("scrollHeight")},1e3),M.add(c)}}function T(e){if(!!A)for(let t=0;t<=e;t++){let n=$(`.section.level2:eq(${t})`).find(".summary");for(let i=0;i<n.length;i++)M.has(`${t}.${i}`)||Y(t,i)}}function Z(e){let t=Math.floor(e-$(".topicsContainer").height());$(".parallellayout.row").height(t-24)}A&&($(".parallellayout.col.main").scroll(function(){let e=$(`.section.level2:eq(${l})`).find(".summary"),t=$(".bandContent.topicsListContainer").height();e.each(function(i,c){c.getBoundingClientRect().bottom<t&&Y(l,i)});let n=this.scrollHeight-this.clientHeight;this.scrollTop>=n-10&&T(l)}),$(window).on("hashchange",function(){T(l-1)})),$(window).on("resize",function(){Z($(this).height())}),pe(),de(),he(),Z($(window).height()),setTimeout(function(){$(".btn-tutorial-run").removeClass("disabled")},5e3),tutorial.onInit(function(){tutorial.onProgress(function(e){e.event==="section_completed"?me(e.element):e.event==="section_skipped"&&K(e.element)})})});})();
//# sourceMappingURL=tutorial-format.js.map
