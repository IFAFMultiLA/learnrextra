(()=>{var me=Object.defineProperty;var X=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var ee=(v,l,h)=>l in v?me(v,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):v[l]=h,H=(v,l)=>{for(var h in l||(l={}))$e.call(l,h)&&ee(v,h,l[h]);if(X)for(var h of X(l))ge.call(l,h)&&ee(v,h,l[h]);return v};$(document).ready(function(){let v="",l=-1,h=!1,F=!1,r=[],N=_.defaults(sessdata.app_config,{summary:!0,reset_button:!0}),q=_.defaults(N.summary,!0).valueOf(),te=_.defaults(N.reset_button,!0).valueOf(),A=new Set,j=!1,P=0,ne=["h2","h3","h4","h5","h6","p","ul","ol","div.figure"].map(e=>".section.level2 > "+e).join(", ");$(ne).each(function(e,t){$(t).prop("id",`mainContentElem-${e}`).addClass("mainContentElem")});let I=function(){let e=[];return{add:function(t,n){e.push({id:t,callback:n})},remove:function(t){e=e.filter(function(n){return t!==n.id})},invoke:function(){for(let t=0;t<e.length;t++)e[t].callback()}}}();function M(e,t){if(typeof t=="undefined"&&(t=!0),r.length===0||(e=e*1,e===l))return;if(l!==-1){let i=$(r[l].jqElement);i.trigger("hide"),i.removeClass("current"),i.trigger("hidden"),$(r[l].jqListElement).removeClass("current")}let n=$(r[e].jqElement);n.trigger("show"),n.addClass("current"),n.trigger("shown"),$(r[e].jqListElement).addClass("current"),l=e,t&&I.invoke(),setTimeout(function(){$(document).scrollTop(0)},0)}function S(e,t){let n=window.location.href.replace(window.location.hash,"");if(window.location=`${n}#${r[e].id}`,t===void 0)$("#learnr-tutorial-content").parent().scrollTop(0);else{let i=$(`#${t}`)[0],c=Math.max(i.offsetTop-i.offsetHeight-60,0);$("#learnr-tutorial-content").parent().scrollTop(c)}T(e-1)}function ie(e){U(),S(this.getAttribute("index"))}function oe(){$(".topicsList").removeClass("hideFloating")}function U(){$(".topicsList").addClass("hideFloating")}function O(e){W();let t=r[e];if(!t.progressiveReveal)return;let n=!0,i=null;for(let c=0;c<t.sections.length;c++){let a=t.sections[c],o=$(a.jqElement);n?(o.trigger("show"),o.removeClass("hide"),o.trigger("shown"),a.skipped?o.removeClass("showSkip"):(o.addClass("showSkip"),i=o)):(o.trigger("hide"),o.addClass("hide"),o.trigger("hidden")),n=n&&a.skipped}!t.progressiveReveal||n?$(t.jqElement).removeClass("hideActions"):$(t.jqElement).addClass("hideActions"),j&&i&&(P=i.offset().top-28,setTimeout(function(){$("html, body").animate({scrollTop:P},300)},60)),j=!1}function R(e){let t=r[e],n=t.sections.length===0?!t.topicCompleted*100:(1-t.sectionsSkipped/t.sections.length)*100;$(t.jqListElement).css("background-position-y",n+"%")}function V(e){return i18next.language||window.localStorage.i18nextLng||e||"en"}function se(e){$(this).data("n_clicks",$(this).data("n_clicks")+1);let t=this.getAttribute("data-section-id"),n=-1,i=-1,c,a;if($.each(r,function(o,s){return $.each(s.sections,function(d,m){if(t===m.id)return n=o,i=d,c=s,a=m,!1}),n===-1}),a.exercises.length&&!a.completed&&!a.allowSkip){let o=i18next.t(["text.exercise","exercise"],{count:a.exercises.length,lngs:[V(),"en"]}),s=i18next.t(["text.youmustcomplete","You must complete the"]),d=i18next.t(["text.inthissection","in this section before continuing."]);bootbox.setLocale(V()),bootbox.alert(s+" "+o+" "+d)}else i===c.sections.length-1?n<r.length-1&&S(l+1):j=!0,K([a.jqElement]),tutorial.skipSection(t)}function ce(e){r[l].sections.length===0&&tutorial.skipSection(r[l].id),T(l),S(l+1)}function ae(e){S(l-1)}function le(){let e=$('<nav id="tutorial-topic" class="topicsList hideFloating" aria-label="topic"></nav>'),t=$('<header class="topicsHeader"></header>'),n=$('<div class="paneCloser"></div>');n.on("click",U),t.append(n),e.append(t);let i=D()?$('<ul class="nav nav-pills" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>'):$('<ul class="nav flex-column" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>');e.append(i),$("#doc-metadata").before(e),W();let c=$(".section.level2");if(c.each(function(a,o){let s={};s.id=$(o).attr("id"),s.exercisesCompleted=0,s.sectionsCompleted=0,s.sectionsSkipped=0,s.topicCompleted=!1,s.jqElement=o,s.jqTitleElement=$(o).children("h2")[0],s.titleText=s.jqTitleElement.innerText;let d=$(o).attr("data-progressive");typeof d!="undefined"&&d!==!1?s.progressiveReveal=d==="true"||d==="TRUE":s.progressiveReveal=h;let m=$(`<li class="topic${D()?"":" nav-item"}" index="${a}"><a href="#${s.id}" class = "nav-link" role="menuitem" tabindex="0">${s.titleText}</a></li>`);m.on("click",ie),s.jqListElement=m,$(i).append(m);let f=$('<div class="topicActions"></div>');if(a>0){let g=$('<button class="btn btn-default" data-i18n="button.previoustopic">Previous Topic</button>');g.on("click",ae),f.append(g)}if(a<c.length-1){let g=$('<button class="btn btn-primary" data-i18n="button.nexttopic">Next Topic</button>');g.on("click",ce),f.append(g)}$(o).append(f),$(o).on("shown",function(){$(this).is(":visible")&&$(o).children(".section.level3").each(function(u,p){L(p)})}),$(o).on("hidden",function(){$(o).children(".section.level3").each(function(u,p){L(p)})}),s.sections=[],$(o).children(".section.level3").each(function(g,u){if(s.progressiveReveal){let w='data-i18n="button.continue"',x="Continue";u.dataset.continueText&&(x=u.dataset.continueText,w="");let b=$(`<button
              class="btn btn-default skip"
              id="continuebutton-${u.id}"
              data-section-id="${u.id}"
              ${w}
            >${x}</button>`);b.data("n_clicks",0),b.on("click",se);let G=$('<div class="exerciseActions"></div>');G.append(b),$(u).append(G)}$(u).on("shown",function(){L(u)}),$(u).on("hidden",function(){L(u)});let p={};p.exercises=[],$(u).children(".tutorial-exercise").each(function(w,x){let b={};b.dataLabel=$(x).attr("data-label"),b.completed=!1,b.jqElement=x,p.exercises.push(b)});let k=$(u).attr("data-allow-skip"),C=F;typeof k!="undefined"&&k!==!1&&(C=k="true"),p.id=u.id,p.completed=!1,p.allowSkip=C,p.skipped=!1,p.jqElement=u,s.sections.push(p)}),r.push(s)}),te){let a=$('<li class="resetButton"><a href="#" data-i18n="text.startover">Start Over</a></li>');a.on("click",function(){let o=i18next.t(["text.areyousure","Are you sure you want to start over? (all exercise progress will be reset)"]);bootbox.setLocale(V()),bootbox.confirm(o,function(s){s&&tutorial.startOver()})}),$("#doc-metadata-additional ul").prepend(a)}return e}let z=new Shiny.InputBinding;$.extend(z,{find:function(e){return $(e).find(".topicsList")},getValue:function(e){return l===-1?null:r[l].id},setValue:function(e,t){for(let n=0;n<r.length;n++)if(r[n].id===t){M(n,!1);break}},subscribe:function(e,t){I.add(e.id,t)},unsubscribe:function(e){I.remove(e.id)}}),Shiny.inputBindings.register(z,"learnr.topicMenuInputBinding");let J=new Shiny.InputBinding;$.extend(J,{find:function(e){return $(e).find(".exerciseActions > button.skip")},getId:function(e){return"continuebutton-"+e.getAttribute("data-section-id")},getValue:function(e){return $(e).data("n_clicks")},setValue:function(e,t){let n=$(e).data("n_clicks");t>n&&$(e).trigger("click"),$(e).data("n_clicks",t)},subscribe:function(e,t){$(e).on("click.continueButtonInputBinding",function(n){t(!1)})},unsubscribe:function(e){$(e).off(".continueButtonInputBinding")}}),Shiny.inputBindings.register(J,"learnr.continueButtonInputBinding");function re(){v=$("title")[0].innerText;let e=$("meta[name=progressive]").attr("content");h=e==="true"||e==="TRUE";let t=$("meta[name=allow-skip]").attr("content");F=t==="true"||t==="TRUE";let n=$(`<h1 class="tutorialTitle">${v}</h1>`);n.on("click",oe),$(".topics").prepend(n),$(".bandContent.topicsListContainer").append(le());for(let c=0;c<r.length;c++)O(c);ue();function i(){$(".topicsList").css("max-height",window.innerHeight)}i(),window.addEventListener("resize",i)}function ue(){$(".footnote-ref").replaceWith(function(){let e=$("<span>");return e.addClass($(this).class),e.append($(this).html()),e}),$(".footnote-back").remove()}function D(){return!window.bootstrap}function de(){if(D())return;document.querySelectorAll(".btn-xs").forEach(n=>{n.classList.remove("btn-xs"),n.classList.add("btn-sm")}),document.querySelectorAll(".sr-only").forEach(n=>{n.classList.contains("visually-hidden-focusable")||n.classList.add("visually-hidden")});let e={panel:"card","panel-default":"","panel-heading":"card-header","panel-title":"card-title","panel-body":"card-body","panel-footer":"card-footer"},t=document.querySelectorAll(".tutorial-exercise-input, .tutorial-question-container");t.length!==0&&t.forEach(n=>{Object.keys(e).forEach(i=>{let c=[n,...n.querySelectorAll(`.${i}`)];if(!c.length)return;let a=e[i];c.forEach(o=>{!o.classList.contains(i)||(o.classList.remove(i),a!==""&&o.classList.add(a))})})})}function fe(){function e(){let t=window.decodeURIComponent(window.location.hash),n=0;return t.length>0&&$.each(r,function(i,c){if("#"+c.id===t)return n=i,!1}),n}M(e()),T(l-1),window.addEventListener("popstate",function(t){M(e())})}function pe(e){let t=$(e),n=t.hasClass("level2"),i;n?i=t.attr("id"):i=$(t.parents(".section.level2")).attr("id");let c=-1;if($.each(r,function(o,s){if(s.id===i)return c=o,!1}),c===-1){console.log('topic "'+i+'" not found');return}let a=r[c];if(n)a.topicCompleted=!0,R(c);else{let o=-1,s=t.attr("id");if($.each(a.sections,function(m,f){if(f.id===s)return o=m,!1}),o===-1){console.log('completed section"'+s+'"not found');return}let d=a.sections[o];d.completed||(a.sectionsCompleted++,R(c),$(d.jqElement).addClass("done"),d.completed=!0,O(c))}}let y=[];function W(){y.splice(0,y.length),E()}function L(e){let t=y.indexOf(e.id);$(e).is(":visible")?t===-1&&(y.push(e.id),E()):t!==-1&&(y.splice(t,1),E())}function E(){Shiny&&Shiny.setInputValue?Shiny.setInputValue("tutorial-visible-sections",y):$(document).on("shiny:sessioninitialized",function(){Shiny.setInputValue("tutorial-visible-sections",y)})}function K(e){let t;if(e.length)t=e[0].id;else{console.log("section "+$(e).selector.split('"')[1]+" not found");return}let n=-1;$.each(r,function(i,c){return t===c.id?(n=i,c.topicCompleted=!0,!1):($.each(c.sections,function(a,o){if(t===o.id)return n=i,o.skipped=!0,c.sectionsSkipped++,!1}),n===-1)}),R(n),O(n)}function he(e){let t=0,n=0,i=e.length;for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)<<0;return t+2147483647+1}function Q(e,t){if(!q)return;let n=$(".parallellayout.col.main"),i=$(".parallellayout.col.side");if(!i.is(":visible")){let s={dontShowAgain:!0};if(config.language==="de"){let d={nextLabel:"Weiter",prevLabel:"Zur\xFCck",doneLabel:"Fertig",stepNumbersOfLabel:"von",dontShowAgainLabel:"Nicht wieder anzeigen"};s=H(H({},s),d)}n.css("flexBasis","100%"),i.css("flexBasis","0%"),i.show(),i.animate({flexBasis:"30%"},{duration:1e3,step:function(d,m){n.css("flexBasis",100-d+"%")},complete:function(){tracking_config.summary&&postEvent(sess,tracking_session_id,sessdata.user_code,"summary_shown"),MathJax.Hub.Queue(["Rerender",MathJax.Hub]),$(".shiny-plot-output").each(()=>Shiny.renderContent(this.id)),introJs().setOptions(s).start()}})}let c=`${e}.${t}`,a=$("#summarytext"),o=null;if(!A.has(c)){let s=$(`.section.level2:eq(${e})  .summary:eq(${t})`),d=s.prevAll(".mainContentElem").first()||s.nextAll(".mainContentElem").first();o=s.prop("id");let m=s.children().detach(),f=null,B=!1;for(let u=0;u<m.length;u++){let p=m[u],Z=$(p).hasClass("replace")||s.hasClass("replace"),k=p.tagName==="DIV"?$(p).children():[p];for(let C=0;C<k.length;C++){let w=k[C],x=$(w);if(w.tagName==="H4"){f!==null&&(f.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),a.append(f));let b="summaryContainer_"+he(x.text());x.on("click",function(){S(e,d.length?d.prop("id"):void 0)}),f=a.find("."+b),f.length===0&&(f=$(`<div class="${b}"></div>`),f.append(x),B=!0)}else f!==null?(Z&&f.find(":not(h4)").remove(),f.append(x)):console.error("invalid summary definition (no summary section provided before)");f!==null&&u>=m.length-1&&(f.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),B&&(a.append(f),B=!1))}}tracking_config.summary&&postEvent(sess,tracking_session_id,sessdata.user_code,"summary_topic_added",{key:c,id:o});let g=a.parent();g.animate({scrollTop:g.prop("scrollHeight")},1e3),A.add(c)}}function T(e){if(!!q)for(let t=0;t<=e;t++){let n=$(`.section.level2:eq(${t})`).find(".summary");for(let i=0;i<n.length;i++)A.has(`${t}.${i}`)||Q(t,i)}}function Y(e){let t=Math.floor(e-$(".topicsContainer").height());$(".parallellayout.row").height(t-24)}q&&($(".parallellayout.col.main").scroll(function(){let e=$(`.section.level2:eq(${l})`).find(".summary"),t=$(".bandContent.topicsListContainer").height();e.each(function(i,c){c.getBoundingClientRect().bottom<t&&Q(l,i)});let n=this.scrollHeight-this.clientHeight;this.scrollTop>=n-10&&T(l)}),$(window).on("hashchange",function(){T(l-1)})),$(window).on("resize",function(){Y($(this).height())}),de(),re(),fe(),Y($(window).height()),setTimeout(function(){$(".btn-tutorial-run").removeClass("disabled")},5e3),tutorial.onInit(function(){tutorial.onProgress(function(e){e.event==="section_completed"?pe(e.element):e.event==="section_skipped"&&K(e.element)})})});})();
//# sourceMappingURL=tutorial-format.js.map
