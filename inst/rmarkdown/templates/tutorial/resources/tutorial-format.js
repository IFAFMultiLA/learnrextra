(()=>{var he=Object.defineProperty;var X=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var ee=(g,l,h)=>l in g?he(g,l,{enumerable:!0,configurable:!0,writable:!0,value:h}):g[l]=h,N=(g,l)=>{for(var h in l||(l={}))$e.call(l,h)&&ee(g,h,l[h]);if(X)for(var h of X(l))me.call(l,h)&&ee(g,h,l[h]);return g};$(document).ready(function(){let g="",l=-1,h=!1,E=!1,u=[],P=_.defaults(sessdata.app_config,{summary:!0,reset_button:!0}),B=_.defaults(P.summary,!0).valueOf(),te=_.defaults(P.reset_button,!0).valueOf(),q=new Set,A=!1,U=0,I=function(){let e=[];return{add:function(t,n){e.push({id:t,callback:n})},remove:function(t){e=e.filter(function(n){return t!==n.id})},invoke:function(){for(let t=0;t<e.length;t++)e[t].callback()}}}();function j(e,t){if(typeof t=="undefined"&&(t=!0),u.length===0||(e=e*1,e===l))return;if(l!==-1){let i=$(u[l].jqElement);i.trigger("hide"),i.removeClass("current"),i.trigger("hidden"),$(u[l].jqListElement).removeClass("current")}let n=$(u[e].jqElement);n.trigger("show"),n.addClass("current"),n.trigger("shown"),$(u[e].jqListElement).addClass("current"),l=e,t&&I.invoke(),setTimeout(function(){$(document).scrollTop(0)},0)}function T(e){let t=window.location.href.replace(window.location.hash,"");window.location=`${t}#${u[e].id}`,$("#learnr-tutorial-content").parent().scrollTop(0),S(e-1)}function ne(e){z(),T(this.getAttribute("index"))}function ie(){$(".topicsList").removeClass("hideFloating")}function z(){$(".topicsList").addClass("hideFloating")}function M(e){K();let t=u[e];if(!t.progressiveReveal)return;let n=!0,i=null;for(let c=0;c<t.sections.length;c++){let a=t.sections[c],o=$(a.jqElement);n?(o.trigger("show"),o.removeClass("hide"),o.trigger("shown"),a.skipped?o.removeClass("showSkip"):(o.addClass("showSkip"),i=o)):(o.trigger("hide"),o.addClass("hide"),o.trigger("hidden")),n=n&&a.skipped}!t.progressiveReveal||n?$(t.jqElement).removeClass("hideActions"):$(t.jqElement).addClass("hideActions"),A&&i&&(U=i.offset().top-28,setTimeout(function(){$("html, body").animate({scrollTop:U},300)},60)),A=!1}function O(e){let t=u[e],n=t.sections.length===0?!t.topicCompleted*100:(1-t.sectionsSkipped/t.sections.length)*100;$(t.jqListElement).css("background-position-y",n+"%")}function R(e){return i18next.language||window.localStorage.i18nextLng||e||"en"}function oe(e){$(this).data("n_clicks",$(this).data("n_clicks")+1);let t=this.getAttribute("data-section-id"),n=-1,i=-1,c,a;if($.each(u,function(o,s){return $.each(s.sections,function(d,r){if(t===r.id)return n=o,i=d,c=s,a=r,!1}),n===-1}),a.exercises.length&&!a.completed&&!a.allowSkip){let o=i18next.t(["text.exercise","exercise"],{count:a.exercises.length,lngs:[R(),"en"]}),s=i18next.t(["text.youmustcomplete","You must complete the"]),d=i18next.t(["text.inthissection","in this section before continuing."]);bootbox.setLocale(R()),bootbox.alert(s+" "+o+" "+d)}else i===c.sections.length-1?n<u.length-1&&T(l+1):A=!0,Q([a.jqElement]),tutorial.skipSection(t)}function se(e){u[l].sections.length===0&&tutorial.skipSection(u[l].id),S(l),T(l+1)}function ce(e){T(l-1)}function ae(){let e=$('<nav id="tutorial-topic" class="topicsList hideFloating" aria-label="topic"></nav>'),t=$('<header class="topicsHeader"></header>'),n=$('<div class="paneCloser"></div>');n.on("click",z),t.append(n),e.append(t);let i=D()?$('<ul class="nav nav-pills" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>'):$('<ul class="nav flex-column" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>');e.append(i),$("#doc-metadata").before(e),K();let c=$(".section.level2");if(c.each(function(a,o){let s={};s.id=$(o).attr("id"),s.exercisesCompleted=0,s.sectionsCompleted=0,s.sectionsSkipped=0,s.topicCompleted=!1,s.jqElement=o,s.jqTitleElement=$(o).children("h2")[0],s.titleText=s.jqTitleElement.innerText;let d=$(o).attr("data-progressive");typeof d!="undefined"&&d!==!1?s.progressiveReveal=d==="true"||d==="TRUE":s.progressiveReveal=h;let r=$(`<li class="topic${D()?"":" nav-item"}" index="${a}"><a href="#${s.id}" class = "nav-link" role="menuitem" tabindex="0">${s.titleText}</a></li>`);r.on("click",ne),s.jqListElement=r,$(i).append(r);let b=$('<div class="topicActions"></div>');if(a>0){let m=$('<button class="btn btn-default" data-i18n="button.previoustopic">Previous Topic</button>');m.on("click",ce),b.append(m)}if(a<c.length-1){let m=$('<button class="btn btn-primary" data-i18n="button.nexttopic">Next Topic</button>');m.on("click",se),b.append(m)}$(o).append(b),$(o).on("shown",function(){$(this).is(":visible")&&$(o).children(".section.level3").each(function(f,p){L(p)})}),$(o).on("hidden",function(){$(o).children(".section.level3").each(function(f,p){L(p)})}),s.sections=[],$(o).children(".section.level3").each(function(m,f){if(s.progressiveReveal){let w='data-i18n="button.continue"',v="Continue";f.dataset.continueText&&(v=f.dataset.continueText,w="");let x=$(`<button
              class="btn btn-default skip"
              id="continuebutton-${f.id}"
              data-section-id="${f.id}"
              ${w}
            >${v}</button>`);x.data("n_clicks",0),x.on("click",oe);let G=$('<div class="exerciseActions"></div>');G.append(x),$(f).append(G)}$(f).on("shown",function(){L(f)}),$(f).on("hidden",function(){L(f)});let p={};p.exercises=[],$(f).children(".tutorial-exercise").each(function(w,v){let x={};x.dataLabel=$(v).attr("data-label"),x.completed=!1,x.jqElement=v,p.exercises.push(x)});let k=$(f).attr("data-allow-skip"),C=E;typeof k!="undefined"&&k!==!1&&(C=k="true"),p.id=f.id,p.completed=!1,p.allowSkip=C,p.skipped=!1,p.jqElement=f,s.sections.push(p)}),u.push(s)}),te){let a=$('<li class="resetButton"><a href="#" data-i18n="text.startover">Start Over</a></li>');a.on("click",function(){let o=i18next.t(["text.areyousure","Are you sure you want to start over? (all exercise progress will be reset)"]);bootbox.setLocale(R()),bootbox.confirm(o,function(s){s&&tutorial.startOver()})}),$("#doc-metadata-additional ul").prepend(a)}return e}let J=new Shiny.InputBinding;$.extend(J,{find:function(e){return $(e).find(".topicsList")},getValue:function(e){return l===-1?null:u[l].id},setValue:function(e,t){for(let n=0;n<u.length;n++)if(u[n].id===t){j(n,!1);break}},subscribe:function(e,t){I.add(e.id,t)},unsubscribe:function(e){I.remove(e.id)}}),Shiny.inputBindings.register(J,"learnr.topicMenuInputBinding");let W=new Shiny.InputBinding;$.extend(W,{find:function(e){return $(e).find(".exerciseActions > button.skip")},getId:function(e){return"continuebutton-"+e.getAttribute("data-section-id")},getValue:function(e){return $(e).data("n_clicks")},setValue:function(e,t){let n=$(e).data("n_clicks");t>n&&$(e).trigger("click"),$(e).data("n_clicks",t)},subscribe:function(e,t){$(e).on("click.continueButtonInputBinding",function(n){t(!1)})},unsubscribe:function(e){$(e).off(".continueButtonInputBinding")}}),Shiny.inputBindings.register(W,"learnr.continueButtonInputBinding");function le(){g=$("title")[0].innerText;let e=$("meta[name=progressive]").attr("content");h=e==="true"||e==="TRUE";let t=$("meta[name=allow-skip]").attr("content");E=t==="true"||t==="TRUE";let n=$(`<h1 class="tutorialTitle">${g}</h1>`);n.on("click",ie),$(".topics").prepend(n),$(".bandContent.topicsListContainer").append(ae());for(let c=0;c<u.length;c++)M(c);re();function i(){$(".topicsList").css("max-height",window.innerHeight)}i(),window.addEventListener("resize",i)}function re(){$(".footnote-ref").replaceWith(function(){let e=$("<span>");return e.addClass($(this).class),e.append($(this).html()),e}),$(".footnote-back").remove()}function D(){return!window.bootstrap}function ue(){if(D())return;document.querySelectorAll(".btn-xs").forEach(n=>{n.classList.remove("btn-xs"),n.classList.add("btn-sm")}),document.querySelectorAll(".sr-only").forEach(n=>{n.classList.contains("visually-hidden-focusable")||n.classList.add("visually-hidden")});let e={panel:"card","panel-default":"","panel-heading":"card-header","panel-title":"card-title","panel-body":"card-body","panel-footer":"card-footer"},t=document.querySelectorAll(".tutorial-exercise-input, .tutorial-question-container");t.length!==0&&t.forEach(n=>{Object.keys(e).forEach(i=>{let c=[n,...n.querySelectorAll(`.${i}`)];if(!c.length)return;let a=e[i];c.forEach(o=>{!o.classList.contains(i)||(o.classList.remove(i),a!==""&&o.classList.add(a))})})})}function de(){function e(){let t=window.decodeURIComponent(window.location.hash),n=0;return t.length>0&&$.each(u,function(i,c){if("#"+c.id===t)return n=i,!1}),n}j(e()),S(l-1),window.addEventListener("popstate",function(t){j(e())})}function fe(e){let t=$(e),n=t.hasClass("level2"),i;n?i=t.attr("id"):i=$(t.parents(".section.level2")).attr("id");let c=-1;if($.each(u,function(o,s){if(s.id===i)return c=o,!1}),c===-1){console.log('topic "'+i+'" not found');return}let a=u[c];if(n)a.topicCompleted=!0,O(c);else{let o=-1,s=t.attr("id");if($.each(a.sections,function(r,b){if(b.id===s)return o=r,!1}),o===-1){console.log('completed section"'+s+'"not found');return}let d=a.sections[o];d.completed||(a.sectionsCompleted++,O(c),$(d.jqElement).addClass("done"),d.completed=!0,M(c))}}let y=[];function K(){y.splice(0,y.length),V()}function L(e){let t=y.indexOf(e.id);$(e).is(":visible")?t===-1&&(y.push(e.id),V()):t!==-1&&(y.splice(t,1),V())}function V(){Shiny&&Shiny.setInputValue?Shiny.setInputValue("tutorial-visible-sections",y):$(document).on("shiny:sessioninitialized",function(){Shiny.setInputValue("tutorial-visible-sections",y)})}function Q(e){let t;if(e.length)t=e[0].id;else{console.log("section "+$(e).selector.split('"')[1]+" not found");return}let n=-1;$.each(u,function(i,c){return t===c.id?(n=i,c.topicCompleted=!0,!1):($.each(c.sections,function(a,o){if(t===o.id)return n=i,o.skipped=!0,c.sectionsSkipped++,!1}),n===-1)}),O(n),M(n)}function pe(e){let t=0,n=0,i=e.length;for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)<<0;return t+2147483647+1}function Y(e,t){if(!B)return;let n=$(".parallellayout.col.main"),i=$(".parallellayout.col.side");if(!i.is(":visible")){let s={dontShowAgain:!0};if(config.language==="de"){let d={nextLabel:"Weiter",prevLabel:"Zur\xFCck",doneLabel:"Fertig",stepNumbersOfLabel:"von",dontShowAgainLabel:"Nicht wieder anzeigen"};s=N(N({},s),d)}n.css("flexBasis","100%"),i.css("flexBasis","0%"),i.show(),i.animate({flexBasis:"30%"},{duration:1e3,step:function(d,r){n.css("flexBasis",100-d+"%")},complete:function(){postEvent(sess,tracking_session_id,sessdata.user_code,"summary_shown"),MathJax.Hub.Queue(["Rerender",MathJax.Hub]),$(".shiny-plot-output").each(()=>Shiny.renderContent(this.id)),introJs().setOptions(s).start()}})}let c=`${e}.${t}`,a=$("#summarytext"),o=null;if(!q.has(c)){let s=$(`.section.level2:eq(${e})  .summary:eq(${t})`);o=s.prop("id");let d=s.children().detach(),r=null,b=!1;for(let m=0;m<d.length;m++){let f=d[m],p=$(f).hasClass("replace")||s.hasClass("replace"),F=f.tagName==="DIV"?$(f).children():[f];for(let k=0;k<F.length;k++){let C=F[k],w=$(C);if(C.tagName==="H4"){r!==null&&(r.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),a.append(r));let v="summaryContainer_"+pe(w.text());r=a.find("."+v),r.length===0&&(r=$(`<div class="${v}"></div>`),r.append(w),b=!0)}else r!==null?(p&&r.find(":not(h4)").remove(),r.append(w)):console.error("invalid summary definition (no summary section provided before)");r!==null&&m>=d.length-1&&(r.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),b&&(a.append(r),b=!1))}}postEvent(sess,tracking_session_id,sessdata.user_code,"summary_topic_added",{key:c,id:o});let H=a.parent();H.animate({scrollTop:H.prop("scrollHeight")},1e3),q.add(c)}}function S(e){if(!!B)for(let t=0;t<=e;t++){let n=$(`.section.level2:eq(${t})`).find(".summary");for(let i=0;i<n.length;i++)q.has(`${t}.${i}`)||Y(t,i)}}function Z(e){let t=Math.floor(e-$(".topicsContainer").height());$(".parallellayout.row").height(t)}B&&($(".parallellayout.col.main").scroll(function(){let e=$(`.section.level2:eq(${l})`).find(".summary"),t=$(".bandContent.topicsListContainer").height();e.each(function(i,c){c.getBoundingClientRect().bottom<t&&Y(l,i)});let n=this.scrollHeight-this.clientHeight;this.scrollTop>=n-10&&S(l)}),$(window).on("hashchange",function(){S(l-1)})),$(window).on("resize",function(){Z($(this).height())}),ue(),le(),de(),Z($(window).height()),tutorial.onInit(function(){tutorial.onProgress(function(e){e.event==="section_completed"?fe(e.element):e.event==="section_skipped"&&Q(e.element)})})});})();
//# sourceMappingURL=tutorial-format.js.map
