(()=>{var pe=Object.defineProperty;var X=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ee=(m,l,p)=>l in m?pe(m,l,{enumerable:!0,configurable:!0,writable:!0,value:p}):m[l]=p,P=(m,l)=>{for(var p in l||(l={}))he.call(l,p)&&ee(m,p,l[p]);if(X)for(var p of X(l))$e.call(l,p)&&ee(m,p,l[p]);return m};$(document).ready(function(){let m="",l=-1,p=!1,U=!1,u=[],q=_.defaults(sessdata.app_config,{summary:!0}).summary,A=new Set,I=!1,z=0,j=function(){let e=[];return{add:function(t,n){e.push({id:t,callback:n})},remove:function(t){e=e.filter(function(n){return t!==n.id})},invoke:function(){for(let t=0;t<e.length;t++)e[t].callback()}}}();function M(e,t){if(typeof t=="undefined"&&(t=!0),u.length===0||(e=e*1,e===l))return;if(l!==-1){let i=$(u[l].jqElement);i.trigger("hide"),i.removeClass("current"),i.trigger("hidden"),$(u[l].jqListElement).removeClass("current")}let n=$(u[e].jqElement);n.trigger("show"),n.addClass("current"),n.trigger("shown"),$(u[e].jqListElement).addClass("current"),l=e,t&&j.invoke(),setTimeout(function(){$(document).scrollTop(0)},0)}function L(e){let t=window.location.href.replace(window.location.hash,"");window.location=`${t}#${u[e].id}`,$("#learnr-tutorial-content").parent().scrollTop(0),y(e-1)}function te(e){E(),L(this.getAttribute("index"))}function ne(){$(".topicsList").removeClass("hideFloating")}function E(){$(".topicsList").addClass("hideFloating")}function O(e){K();let t=u[e];if(!t.progressiveReveal)return;let n=!0,i=null;for(let c=0;c<t.sections.length;c++){let r=t.sections[c],s=$(r.jqElement);n?(s.trigger("show"),s.removeClass("hide"),s.trigger("shown"),r.skipped?s.removeClass("showSkip"):(s.addClass("showSkip"),i=s)):(s.trigger("hide"),s.addClass("hide"),s.trigger("hidden")),n=n&&r.skipped}!t.progressiveReveal||n?$(t.jqElement).removeClass("hideActions"):$(t.jqElement).addClass("hideActions"),I&&i&&(z=i.offset().top-28,setTimeout(function(){$("html, body").animate({scrollTop:z},300)},60)),I=!1}function R(e){let t=u[e],n=t.sections.length===0?!t.topicCompleted*100:(1-t.sectionsSkipped/t.sections.length)*100;$(t.jqListElement).css("background-position-y",n+"%")}function V(e){return i18next.language||window.localStorage.i18nextLng||e||"en"}function ie(e){$(this).data("n_clicks",$(this).data("n_clicks")+1);let t=this.getAttribute("data-section-id"),n=-1,i=-1,c,r;if($.each(u,function(s,a){return $.each(a.sections,function(o,h){if(t===h.id)return n=s,i=o,c=a,r=h,!1}),n===-1}),r.exercises.length&&!r.completed&&!r.allowSkip){let s=i18next.t(["text.exercise","exercise"],{count:r.exercises.length,lngs:[V(),"en"]}),a=i18next.t(["text.youmustcomplete","You must complete the"]),o=i18next.t(["text.inthissection","in this section before continuing."]);bootbox.setLocale(V()),bootbox.alert(a+" "+s+" "+o)}else i===c.sections.length-1?n<u.length-1&&L(l+1):I=!0,Q([r.jqElement]),tutorial.skipSection(t)}function oe(e){u[l].sections.length===0&&tutorial.skipSection(u[l].id),y(l),L(l+1)}function se(e){L(l-1)}function ce(){let e=$('<nav id="tutorial-topic" class="topicsList hideFloating" aria-label="topic"></nav>'),t=$('<header class="topicsHeader"></header>'),n=$('<div class="paneCloser"></div>');n.on("click",E),t.append(n),e.append(t);let i=D()?$('<ul class="nav nav-pills" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>'):$('<ul class="nav flex-column" role="menubar" aria-orientation="vertical" aria-label="topic"></ul>');e.append(i),$("#doc-metadata").before(e),K();let c=$(".section.level2");c.each(function(s,a){let o={};o.id=$(a).attr("id"),o.exercisesCompleted=0,o.sectionsCompleted=0,o.sectionsSkipped=0,o.topicCompleted=!1,o.jqElement=a,o.jqTitleElement=$(a).children("h2")[0],o.titleText=o.jqTitleElement.innerText;let h=$(a).attr("data-progressive");typeof h!="undefined"&&h!==!1?o.progressiveReveal=h==="true"||h==="TRUE":o.progressiveReveal=p;let b=$(`<li class="topic${D()?"":" nav-item"}" index="${s}"><a href="#${o.id}" class = "nav-link" role="menuitem" tabindex="0">${o.titleText}</a></li>`);b.on("click",te),o.jqListElement=b,$(i).append(b);let v=$('<div class="topicActions"></div>');if(s>0){let g=$('<button class="btn btn-default" data-i18n="button.previoustopic">Previous Topic</button>');g.on("click",se),v.append(g)}if(s<c.length-1){let g=$('<button class="btn btn-primary" data-i18n="button.nexttopic">Next Topic</button>');g.on("click",oe),v.append(g)}$(a).append(v),$(a).on("shown",function(){$(this).is(":visible")&&$(a).children(".section.level3").each(function(d,f){B(f)})}),$(a).on("hidden",function(){$(a).children(".section.level3").each(function(d,f){B(f)})}),o.sections=[],$(a).children(".section.level3").each(function(g,d){if(o.progressiveReveal){let N='data-i18n="button.continue"',T="Continue";d.dataset.continueText&&(T=d.dataset.continueText,N="");let x=$(`<button
              class="btn btn-default skip"
              id="continuebutton-${d.id}"
              data-section-id="${d.id}"
              ${N}
            >${T}</button>`);x.data("n_clicks",0),x.on("click",ie);let G=$('<div class="exerciseActions"></div>');G.append(x),$(d).append(G)}$(d).on("shown",function(){B(d)}),$(d).on("hidden",function(){B(d)});let f={};f.exercises=[],$(d).children(".tutorial-exercise").each(function(N,T){let x={};x.dataLabel=$(T).attr("data-label"),x.completed=!1,x.jqElement=T,f.exercises.push(x)});let k=$(d).attr("data-allow-skip"),C=U;typeof k!="undefined"&&k!==!1&&(C=k="true"),f.id=d.id,f.completed=!1,f.allowSkip=C,f.skipped=!1,f.jqElement=d,o.sections.push(f)}),u.push(o)});let r=$('<li class="resetButton"><a href="#" data-i18n="text.startover">Start Over</a></li>');return r.on("click",function(){let s=i18next.t(["text.areyousure","Are you sure you want to start over? (all exercise progress will be reset)"]);bootbox.setLocale(V()),bootbox.confirm(s,function(a){a&&tutorial.startOver()})}),$("#doc-metadata-additional ul").prepend(r),e}let J=new Shiny.InputBinding;$.extend(J,{find:function(e){return $(e).find(".topicsList")},getValue:function(e){return l===-1?null:u[l].id},setValue:function(e,t){for(let n=0;n<u.length;n++)if(u[n].id===t){M(n,!1);break}},subscribe:function(e,t){j.add(e.id,t)},unsubscribe:function(e){j.remove(e.id)}}),Shiny.inputBindings.register(J,"learnr.topicMenuInputBinding");let W=new Shiny.InputBinding;$.extend(W,{find:function(e){return $(e).find(".exerciseActions > button.skip")},getId:function(e){return"continuebutton-"+e.getAttribute("data-section-id")},getValue:function(e){return $(e).data("n_clicks")},setValue:function(e,t){let n=$(e).data("n_clicks");t>n&&$(e).trigger("click"),$(e).data("n_clicks",t)},subscribe:function(e,t){$(e).on("click.continueButtonInputBinding",function(n){t(!1)})},unsubscribe:function(e){$(e).off(".continueButtonInputBinding")}}),Shiny.inputBindings.register(W,"learnr.continueButtonInputBinding");function ae(){m=$("title")[0].innerText;let e=$("meta[name=progressive]").attr("content");p=e==="true"||e==="TRUE";let t=$("meta[name=allow-skip]").attr("content");U=t==="true"||t==="TRUE";let n=$(`<h1 class="tutorialTitle">${m}</h1>`);n.on("click",ne),$(".topics").prepend(n),$(".bandContent.topicsListContainer").append(ce());for(let c=0;c<u.length;c++)O(c);le();function i(){$(".topicsList").css("max-height",window.innerHeight)}i(),window.addEventListener("resize",i)}function le(){$(".footnote-ref").replaceWith(function(){let e=$("<span>");return e.addClass($(this).class),e.append($(this).html()),e}),$(".footnote-back").remove()}function D(){return!window.bootstrap}function re(){if(D())return;document.querySelectorAll(".btn-xs").forEach(n=>{n.classList.remove("btn-xs"),n.classList.add("btn-sm")}),document.querySelectorAll(".sr-only").forEach(n=>{n.classList.contains("visually-hidden-focusable")||n.classList.add("visually-hidden")});let e={panel:"card","panel-default":"","panel-heading":"card-header","panel-title":"card-title","panel-body":"card-body","panel-footer":"card-footer"},t=document.querySelectorAll(".tutorial-exercise-input, .tutorial-question-container");t.length!==0&&t.forEach(n=>{Object.keys(e).forEach(i=>{let c=[n,...n.querySelectorAll(`.${i}`)];if(!c.length)return;let r=e[i];c.forEach(s=>{!s.classList.contains(i)||(s.classList.remove(i),r!==""&&s.classList.add(r))})})})}function ue(){function e(){let t=window.decodeURIComponent(window.location.hash),n=0;return t.length>0&&$.each(u,function(i,c){if("#"+c.id===t)return n=i,!1}),n}M(e()),y(l-1),window.addEventListener("popstate",function(t){M(e())})}function de(e){let t=$(e),n=t.hasClass("level2"),i;n?i=t.attr("id"):i=$(t.parents(".section.level2")).attr("id");let c=-1;if($.each(u,function(s,a){if(a.id===i)return c=s,!1}),c===-1){console.log('topic "'+i+'" not found');return}let r=u[c];if(n)r.topicCompleted=!0,R(c);else{let s=-1,a=t.attr("id");if($.each(r.sections,function(h,b){if(b.id===a)return s=h,!1}),s===-1){console.log('completed section"'+a+'"not found');return}let o=r.sections[s];o.completed||(r.sectionsCompleted++,R(c),$(o.jqElement).addClass("done"),o.completed=!0,O(c))}}let w=[];function K(){w.splice(0,w.length),H()}function B(e){let t=w.indexOf(e.id);$(e).is(":visible")?t===-1&&(w.push(e.id),H()):t!==-1&&(w.splice(t,1),H())}function H(){Shiny&&Shiny.setInputValue?Shiny.setInputValue("tutorial-visible-sections",w):$(document).on("shiny:sessioninitialized",function(){Shiny.setInputValue("tutorial-visible-sections",w)})}function Q(e){let t;if(e.length)t=e[0].id;else{console.log("section "+$(e).selector.split('"')[1]+" not found");return}let n=-1;$.each(u,function(i,c){return t===c.id?(n=i,c.topicCompleted=!0,!1):($.each(c.sections,function(r,s){if(t===s.id)return n=i,s.skipped=!0,c.sectionsSkipped++,!1}),n===-1)}),R(n),O(n)}function fe(e){let t=0,n=0,i=e.length;for(;n<i;)t=(t<<5)-t+e.charCodeAt(n++)<<0;return t+2147483647+1}function Y(e,t){if(!q)return;let n=$(".parallellayout.col.main"),i=$(".parallellayout.col.side");if(!i.is(":visible")){let s={dontShowAgain:!0};if(config.language==="de"){let a={nextLabel:"Weiter",prevLabel:"Zur\xFCck",doneLabel:"Fertig",stepNumbersOfLabel:"von",dontShowAgainLabel:"Nicht wieder anzeigen"};s=P(P({},s),a)}n.css("flexBasis","100%"),i.css("flexBasis","0%"),i.show(),i.animate({flexBasis:"30%"},{duration:1e3,step:function(a,o){n.css("flexBasis",100-a+"%")},complete:()=>introJs().setOptions(s).start()})}let c=`${e}.${t}`,r=$("#summarytext");if(!A.has(c)){let s=$(`.section.level2:eq(${e})  .summary:eq(${t})`),a=s.children().detach(),o=null,h=!1;for(let v=0;v<a.length;v++){let S=a[v],g=$(S).hasClass("replace")||s.hasClass("replace"),d=S.tagName==="DIV"?$(S).children():[S];for(let f=0;f<d.length;f++){let F=d[f],k=$(F);if(F.tagName==="H4"){o!==null&&(o.css("opacity","0%").animate({opacity:"100%"},{duration:1e3}),r.append(o));let C="summaryContainer_"+fe(k.text());o=r.find("."+C),o.length===0&&(o=$(`<div class="${C}"></div>`),o.append(k),h=!0)}else o!==null?(g&&o.find(":not(h4)").remove(),o.append(k)):console.error("invalid summary definition (no summary section provided before)");o!==null&&v>=a.length-1&&(o.css("opacity","0%").animate({opacity:"100%"},{duration:1e3,complete:function(){MathJax.Hub.Queue(["Rerender",MathJax.Hub])}}),h&&(r.append(o),h=!1))}}let b=r.parent();b.animate({scrollTop:b.prop("scrollHeight")},1e3),A.add(c)}}function y(e){if(!!q)for(let t=0;t<=e;t++){let n=$(`.section.level2:eq(${t})`).find(".summary");for(let i=0;i<n.length;i++)A.has(`${t}.${i}`)||Y(t,i)}}function Z(e){let t=Math.floor(e-$(".topicsContainer").height());$(".parallellayout.row").height(t)}q&&($(".parallellayout.col.main").scroll(function(){let e=$(`.section.level2:eq(${l})`).find(".summary"),t=$(".bandContent.topicsListContainer").height();e.each(function(i,c){c.getBoundingClientRect().bottom<t&&Y(l,i)});let n=this.scrollHeight-this.clientHeight;this.scrollTop>=n-10&&y(l)}),$(window).on("hashchange",function(){y(l-1)})),$(window).on("resize",function(){Z($(this).height())}),re(),ae(),ue(),Z($(window).height()),tutorial.onInit(function(){tutorial.onProgress(function(e){e.event==="section_completed"?de(e.element):e.event==="section_skipped"&&Q(e.element)})})});})();
//# sourceMappingURL=tutorial-format.js.map
